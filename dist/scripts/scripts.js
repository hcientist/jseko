"use strict";angular.module("jsekoApp",["ui","ngRoute","rzModule","ngAnimate","wu.masonry","NgSwitchery"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainController",reloadOnSearch:!1}).otherwise({redirectTo:"/"})}]),angular.module("jsekoApp").directive("answer",["$compile","$http","$templateCache",function(a,b,c){var d=function(a){var d,e="js/directives/directiveTemplates/",f={Text:"answerText.html",Image:"answerImage.html",Video:"answerVideo.html"},g=e+f[a];return d=b.get(g,{cache:c})};return{scope:{answer:"=model"},restrict:"E",replace:!0,link:function(b,c,e){var f=d(b.answer.type);f.success(function(a){c.html(a)}).then(function(d){c.replaceWith(a(c.html())(b))})}}}]),angular.module("jsekoApp").directive("answerHolder",[function(){return{scope:{answer:"=model"},restrict:"E",templateUrl:"js/directives/directiveTemplates/answerHolder.html",replace:!0,link:function(){}}}]),angular.module("jsekoApp").directive("joke",function(){return{scope:{individualJoke:"=model",arrayOfViewableAnswerTypes:"=answerFilterArray",answerPCRange:"=answerRange"},restrict:"E",templateUrl:"js/directives/directiveTemplates/joke.html",replace:!0,link:function(){}}}),angular.module("jsekoApp").filter("Type",function(){return function(a,b){var c=[];return angular.forEach(a,function(a){b[a.type]?(console.log("individualItem.type",a.type),c.push(a)):console.log("filter says no")}),console.log("filteredArray",c),c}}),angular.module("jsekoApp").filter("SpaceToHyphen",function(){return function(a){return a?a.replace(/ /g,"-"):""}}),angular.module("jsekoApp").filter("SpaceToHTML",function(){return function(a){return a?a.replace(/ /g,"%20"):""}}),angular.module("jsekoApp").factory("JokeService",function(a,b){return{getJokes:function(){var c=b.defer();return a.get("data/jokes.json").success(function(a){c.resolve(a)}).error(function(){c.reject()}),c.promise}}}),angular.module("jsekoApp").factory("ColorService",function(){return{onColors:function(a){var b={0:"#FF0000",1:"#00ff00",2:"#0000ff",3:"#ff0080",4:"#00ffff",5:"#80ff00",6:"#660000",7:"#0080ff",8:"#FF7722",9:"#808000",10:"#00ff80",11:"#ff00ff",12:"#EE4000",13:"#FFD700",14:"#006600",15:"#8000ff",16:"#4B0082",17:"#000000",18:"#ffffff"};return b[a]},offColors:function(a){var b={0:"#FFCCCC",1:"#CCFFCC",2:"#CCCCFF",3:"#FFCCFF",4:"#CCFFFF",5:"#FFFFCC",6:"#FF9999",7:"#CCFFFF",8:"#FFFFEE",9:"#FFFF99",10:"#99FFFF",11:"#FF99FF",12:"#FFD999",13:"#FFFF99",14:"#99FF99",15:"#FF99FF",16:"#E499FF",17:"#000000",18:"#ffffff"};return b[a]}}}),angular.module("jsekoApp").controller("MainController",["$scope","$filter","$routeParams","$location","JokeService","TypeFilter","SpaceToHTMLFilter","ColorService",function(a,b,c,d,e,f,g,h){function i(b){if(b.s&&(console.log("rp.s){"),a.searchAll=b.s),b.jokeType){console.log("rp.jokeType){");var c=b.jokeType.split(",");a.jokeTypes=c;for(var d=0;d<c.length;d++)a.arrayOfViewableJokeTypes[c[d]]&&(a.arrayOfViewableJokeTypes[c[d]]=!1)}if(b.answerType){console.log("rp.answerType){");var e=b.answerType.split(",");a.answerTypes=e;for(var f=0;f<e.length;f++)a.arrayOfViewableAnswerTypes[e[f]]&&(a.arrayOfViewableAnswerTypes[e[f]]=!1)}if(b.jokeFilter){console.log("rp.jokeFilter){");var g=b.jokeFilter.split(",");a.jokeFilter=g,a.answerFilter=g,a.slider.jokeLowerBound=g[0],a.slider.jokeUpperBound=g[1]}if(b.answerFilter){console.log("rp.answerFilter){");var h=b.answerFilter.split(",");a.answerFilter=h,a.slider.answerLowerBound=h[0],a.slider.answerUpperBound=h[1]}a.routeParams=b}a.message="ANSWER: ",a.arrayOfViewableJokeTypes={},a.arrayOfViewableAnswerTypes={},a.answerPCRange=function(b){return parseInt(b.pC)>=a.slider.answerLowerBound&&parseInt(b.pC)<=a.slider.answerUpperBound},a.jokePCRange=function(b){return parseInt(b.parental)>=a.slider.jokeLowerBound&&parseInt(b.parental)<=a.slider.jokeUpperBound},a.slider={answerLowerBound:1,answerUpperBound:8,jokeLowerBound:1,jokeUpperBound:8,min:1,max:10},a.fireJokes={jokes:[{joke:"What do you call an Alligator in a vest?",type:"CaR",answers:[{ans:"An investigator!",pC:1,type:"Text"},{ans:"A snappy dresser!",pC:1,type:"Text"},{ans:"text",pC:1,type:"Image",image:"img/investogator.png"}],cadence:!1,parental:1}]},a.allJokes=a.fireJokes.jokes;var j=function(b,d){for(var e=[],f=[],g=0;g<b.length;g++)if(e.indexOf(b[g].type)<0&&(e.push(b[g].type),console.log(a.arrayOfViewableJokeTypes),console.log(b),a.arrayOfViewableJokeTypes[b[g].type]=!0),b[g].answers){for(var h=0;h<b[g].answers.length;h++)f.indexOf(b[g].answers[h].type)<0&&b[g].answers[h].type&&(f.push(b[g].answers[h].type),a.arrayOfViewableAnswerTypes[b[g].answers[h].type]=!0);console.log("$scope.arrayOfViewableAnswerTypes)",a.arrayOfViewableAnswerTypes)}a.uniqJokeTypes=e,a.uniqAnswerTypes=f,d&&"function"==typeof d&&d(c)},k=function(a){for(var b,c,d=a.length;d;)c=Math.floor(Math.random()*d--),b=a[d],a[d]=a[c],a[c]=b;return a};j(k(a.allJokes),i),console.log(a.allJokes),console.log(a.jokePCRange(a.allJokes)),a.$watch("searchAll",function(a){d.search("s",a)}),a.$watch("slider.jokeLowerBound",function(b){d.search("jokeFilter",b+","+a.slider.jokeUpperBound)}),a.$watch("slider.jokeUpperBound",function(b){d.search("jokeFilter",a.slider.jokeLowerBound+","+b)}),a.$watch("slider.answerLowerBound",function(b){d.search("answerFilter",b+","+a.slider.answerUpperBound)}),a.$watch("slider.answerUpperBound",function(b){d.search("answerFilter",a.slider.answerLowerBound+","+b)}),a.jokeTypeClick=function(b){console.log("jokeTypeClick");var c=b;a.arrayOfViewableJokeTypes[c]=!a.arrayOfViewableJokeTypes[c];var e="";for(var f in a.arrayOfViewableJokeTypes)a.arrayOfViewableJokeTypes[f]===!1&&(e=""===e?f:e+","+f);d.search("jokeType",e)},a.answerTypeClick=function(b){var c=b;a.arrayOfViewableAnswerTypes[c]=!a.arrayOfViewableAnswerTypes[c];var e="";for(var f in a.arrayOfViewableAnswerTypes)a.arrayOfViewableAnswerTypes[f]===!1&&(e=""===e?f:e+","+f);d.search("answerType",e)},a.jokeCssClasses=function(b){return a.arrayOfViewableJokeTypes[b]===!0?b.split(" ").join("-"):b.split(" ").join("-")+"-off"},a.answerCssClasses=function(b){return a.arrayOfViewableAnswerTypes[b]===!0?b.split(" ").join("-"):b.split(" ").join("-")+"-off"},a.colors=h,console.log(a.allJokes[0]),console.log(a.answerPCRange(a.allJokes[0].answers[0]))}]);